\documentclass[a4paper]{article}

%%%%%%%%%%%%%%%%
%%% PREAMBLE %%%
%%%%%%%%%%%%%%%%

%%% PACKAGES %%%
\usepackage{fontspec}                     % set fonts
	\setmainfont{Junicode}
\usepackage[a4paper,margin=3cm]{geometry} % page layout
\usepackage[svgnames]{xcolor}             % rainbowssss *_*
\usepackage{hyperref}                     % enhanced references (links)
	\hypersetup{%
		colorlinks=true,
		allcolors=NavyBlue}
\usepackage{fancyhdr}                     % headers & footers
\usepackage{titling}                      % macros \thetitle, \theauthor
\usepackage{graphicx}                     % enhanced graphics support
	\graphicspath{{img/}}
\usepackage[toc]{glossaries}              % glossaries (obv)
	\setglossarystyle{altlisthypergroup}
	\makeglossaries
	\include{glossary}
\usepackage{enumitem}                     % enhanced enumerations
\usepackage{tabularx}                     % enhanced tables
\usepackage{float}                        % 'H' figure placement
\usepackage{rotating}                     % sidewaysfigure
\usepackage[noabbrev]{cleveref}           % clever references
\usepackage{booktabs}                     % pretty tables
\usepackage{tikz}                         % drawings
	\usetikzlibrary{shapes}
\usepackage{subcaption}                   % side-by-side figures & subfigures

%%% OTHER %%%
\setlength\headheight{22.3725pt}

%%% META %%%
\title{Assignment \#3 \\ Behavioural Modelling}
\author{Levendula}
\date{\today}

%%% ADDITIONAL PACKAGE CONFIG %%%
% fancyhdr
\pagestyle{fancy}
\fancyhf{}
\lhead{\theauthor}
\rhead{\thetitle}
\lfoot{\today}
\rfoot{\thepage}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%
%%% BODY %%%
%%%%%%%%%%%%

\begin{document}

\include{titlepage}

\tableofcontents
\listoffigures
\clearpage



% ------------------------------------------------------------------------------
\section{Our task}

We were assigned to model the behaviour of some components related to boarding
using state machine and activity diagrams.

First, we modelled the operation of the bus's doors by means of a state machine
diagram. The behaviour of the doors was already defined in some specific cases
on sequence diagrams, which we made sure to conform to.

In the second task, we created an activity diagram describing the
\gls{RFIDScanner} based on the textual user manual.

As a final task, we made another state machine diagram which models the
behaviour of the \gls{boardingController} based on the other components'
behaviourâ€”diagrams for some components have been given to us, such as the
\gls{turnstile}'s state machine diagram. We made sure to adhere to the critical
requirements.


% ------------------------------------------------------------------------------
\section{Solutions}


% - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
\subsection{The state machine representation of the door's behaviour}

The door intutively has two states: \texttt{Opened} and \texttt{Closed}.

Successfully transitioning into the \texttt{Opened} and \texttt{Closed} states
results in respective \texttt{Opened} and \texttt{Closed} signals being sent.

When transitioning out of the \texttt{Opened} state, it is possible that the
door cannot close properly due to being blocked: in this case, a
\texttt{Blocked} signal is emitted and the door continues being \texttt{Opened}.

See \cref{fig:stm-DoorBehavior} for the state machine diagram.

All the activities seen on the transitions can be seen on
\cref{fig:stm-DoorBehavior-effects}.

\begin{figure}[p]
	\includegraphics[width=\textwidth]{stm-DoorBehavior.jpg}
	\caption{State machine diagram modelling the door's behaviour}%
	\label{fig:stm-DoorBehavior}
\end{figure}

\begin{figure}
	\begin{subfigure}{.33\textwidth}
		\includegraphics[width=\textwidth]
		{stm-DoorBehavior-SendOpenedActivity.jpg}
	\end{subfigure}
	\begin{subfigure}{.33\textwidth}
		\includegraphics[width=\textwidth]
		{stm-DoorBehavior-SendClosedActivity.jpg}
	\end{subfigure}
	\begin{subfigure}{.33\textwidth}
		\includegraphics[width=\textwidth]
		{stm-DoorBehavior-SendBlockedActivity.jpg}
	\end{subfigure}
	\caption{Activity diagrams for the effects seen in
		\cref{fig:stm-DoorBehavior}}%
	\label{fig:stm-DoorBehavior-effects}
\end{figure}


% - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
\subsection{Activity diagram for the RFID scanner}

As described in the \gls{RFIDScanner}'s user manual, the scanner initially
listens for a \texttt{Start} signal on its port. Upon receiving the signal, the
scanning process begins.

The process may end in three ways:

\begin{enumerate}[label=\Alph*)]
	\item The RFID raw data is read and processed within five seconds. In
		this case, the results are given to the \gls{boardingController}
		in a \texttt{SuccessfulScan} signal.

	\item Reading and processing of the data cannot be completed within the
		five second window. A \texttt{Timeout} signal is sent.

	\item The scanner receives a \texttt{Stop} signal.
\end{enumerate}

In all three cases, the scanning process terminates and the scanner resumes
listening for the \texttt{Start} signal.

We have modelled this behaviour by enclosing the scanning process in an
\emph{interruptible region} and specifying the flows leaving the ending actions
that correspond to the possible cases as \emph{interrupting}.

The activity diagram can be found on \cref{fig:act-ScannerBehavior}.

\begin{figure}
	\includegraphics[width=\textwidth]{act-ScannerBehavior.jpg}
	\caption{Activity diagram of the \gls{RFIDScanner}'s behaviour}%
	\label{fig:act-ScannerBehavior}
\end{figure}


% - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
\subsection{Boarding contoller behaviour}

% TODO



% ------------------------------------------------------------------------------
\section{Work journal}

\begin{tabularx}{\textwidth}{l l l X}
	\toprule
	Team member & Date & Time\footnote{in hours} & Activity \\ \midrule

	% TODO
	\bottomrule
\end{tabularx}

\clearpage
\glsaddall
\printglossaries

\end{document}
